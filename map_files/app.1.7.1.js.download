(()=>{var e={956:(e,t)=>{class n{static get VERSION(){return"2.0.0"}static get COOKIE_NAME(){return"__uid_2"}static get DEFAULT_REFRESH_RETRY_PERIOD_MS(){return 5e3}static setupGoogleTag(){window.googletag||(window.googletag={}),googletag.encryptedSignalProviders||(googletag.encryptedSignalProviders=[]),googletag.encryptedSignalProviders.push({id:"uidapi.com",collectorFunction:()=>window.__uid2&&window.__uid2.getAdvertisingTokenAsync?__uid2.getAdvertisingTokenAsync():Promise.reject(new Error("UID2 SDK not present"))})}constructor(){this.init=t=>{if(s)throw new TypeError("Calling init() more than once is not allowed");if("object"!==typeof t||null===t)throw new TypeError("opts must be an object");if("function"!==typeof t.callback)throw new TypeError("opts.callback must be a function");if("undefined"!==typeof t.refreshRetryPeriod){if("number"!==typeof t.refreshRetryPeriod)throw new TypeError("opts.refreshRetryPeriod must be a number");if(t.refreshRetryPeriod<1e3)throw new RangeError("opts.refreshRetryPeriod must be >= 1000")}s=!0,e=t;let n=e.identity?e.identity:h();I(n)},this.getAdvertisingToken=()=>t&&!l()?t.advertising_token:void 0,this.getAdvertisingTokenAsync=()=>c()?t?l()?Promise.reject(new Error("temporarily unavailable")):Promise.resolve(t.advertising_token):Promise.reject(new Error("identity not available")):new Promise(((e,t)=>{d.push({resolve:e,reject:t})})),this.isLoginRequired=()=>c()?!t:void 0,this.disconnect=()=>{this.abort(),p(n.COOKIE_NAME),t=void 0,r=n.IdentityStatus.INVALID;const e=d;d=[],e.forEach((e=>e.reject(new Error("disconnect()"))))},this.abort=()=>{s=!0,"undefined"!==typeof o&&(clearTimeout(o),o=void 0),i&&(i.abort(),i=void 0)};let e,t,r,o,i,a,s=!1,d=[];const c=()=>"undefined"!==typeof r,l=()=>r===n.IdentityStatus.EXPIRED,u=(e,t)=>"undefined"===typeof e?t:e,p=e=>{document.cookie=e+"=;expires=Tue, 1 Jan 1980 23:59:59 GMT"},g=(t,n)=>{r=t;const o=d;d=[];const i=this.getAdvertisingToken(),a={advertisingToken:i,advertising_token:i,status:t,statusText:n};e.callback(a),i?o.forEach((e=>e.resolve(i))):o.forEach((e=>e.reject(new Error(n))))},f=(r,o,i)=>{t=r,((t,n)=>{const r=JSON.stringify(n),o=new Date(n.refresh_expires),i=u(e.cookiePath,"/");let a=t+"="+encodeURIComponent(r)+" ;path="+i+";expires="+o.toUTCString();"undefined"!==typeof e.cookieDomain&&(a+=";domain="+e.cookieDomain),document.cookie=a})(n.COOKIE_NAME,r),k(),g(o,i)},v=(e,r)=>{t=void 0,this.abort(),p(n.COOKIE_NAME),g(e,r)},m=e=>{try{return(e=>{if(!e.advertising_token)throw new T("advertising_token is not available or is not valid");if(!e.refresh_token)throw new T("refresh_token is not available or is not valid");a=e.refresh_response_key?2:1})(e),!0}catch(t){if(t instanceof T)return v(n.IdentityStatus.INVALID,t.message),!1;throw t}},w=(e,t,n)=>{m(e)&&f(e,t,n)},h=()=>{const e=(e=>{const t=document.cookie;if(t){const n=t.split("; ").find((t=>t.startsWith(e+"=")));if(n)return decodeURIComponent(n.split("=")[1])}})(n.COOKIE_NAME);if(e)return JSON.parse(e)},I=e=>{if(!e)return void v(n.IdentityStatus.NO_IDENTITY,"Identity not available");if(!m(e))return;const r=Date.now();e=((e,t)=>({refresh_from:t,refresh_expires:t+6048e5,identity_expires:t+144e5,...e}))(e,r),e.refresh_expires<r?v(n.IdentityStatus.REFRESH_EXPIRED,"Identity expired, refresh expired"):e.refresh_from<=r?y(e):"undefined"===typeof t?w(e,n.IdentityStatus.ESTABLISHED,"Identity established"):e.advertising_token!==t.advertising_token?w(e,n.IdentityStatus.REFRESH,"Identity refreshed"):k()},S=e=>{let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},y=t=>{const r=u(e.baseUrl,"https://prod.uidapi.com")+"/v2/token/refresh",o=new XMLHttpRequest;i=o,o.overrideMimeType("text/plain"),o.open("POST",r,!0),o.setRequestHeader("X-UID2-Client-Version","uid2-sdk-"+n.VERSION),o.onreadystatechange=()=>{if(i=void 0,o.readyState===o.DONE)try{if(1===a||200!==o.status){const e=JSON.parse(o.responseText);if(!E(t,e))return;w(e.body,n.IdentityStatus.REFRESHED,"Identity refreshed")}else if(2===a){let e=S(atob(o.responseText));window.crypto.subtle.importKey("raw",S(atob(t.refresh_response_key)),{name:"AES-GCM"},!1,["decrypt"]).then((r=>{window.crypto.subtle.decrypt({name:"AES-GCM",iv:e.slice(0,12),tagLength:128},r,e.slice(12)).then((e=>{const r=String.fromCharCode.apply(String,new Uint8Array(e)),o=JSON.parse(r);E(t,o)&&w(o.body,n.IdentityStatus.REFRESHED,"Identity refreshed")}))}))}}catch(e){_(t,e.message)}},o.send(t.refresh_token)},E=(e,t)=>{if("object"!==typeof t||null===t)throw new TypeError("refresh response is not an object");if("optout"===t.status)return v(n.IdentityStatus.OPTOUT,"User opted out"),!1;if("expired_token"===t.status)return v(n.IdentityStatus.REFRESH_EXPIRED,"Refresh token expired"),!1;if("success"===t.status){if("object"===typeof t.body&&null!==t.body)return!0;throw new TypeError("refresh response object does not have a body")}throw new TypeError("unexpected response status: "+t.status)},_=(e,t)=>{const r=Date.now();e.refresh_expires<=r?v(n.IdentityStatus.REFRESH_EXPIRED,"Refresh expired; token refresh failed: "+t):e.identity_expires<=r&&!l()?f(e,n.IdentityStatus.EXPIRED,"Token refresh failed for expired identity: "+t):c()?k():w(e,n.IdentityStatus.ESTABLISHED,"Identity established; token refresh failed: "+t)},k=()=>{const t=u(e.refreshRetryPeriod,n.DEFAULT_REFRESH_RETRY_PERIOD_MS);o=setTimeout((()=>{this.isLoginRequired()||I(h())}),t)};class T extends Error{constructor(e){super(e),this.name="InvalidIdentityError"}}}}!function(e){let t;!function(e){e[e.ESTABLISHED=0]="ESTABLISHED",e[e.REFRESHED=1]="REFRESHED",e[e.EXPIRED=100]="EXPIRED",e[e.NO_IDENTITY=-1]="NO_IDENTITY",e[e.INVALID=-2]="INVALID",e[e.REFRESH_EXPIRED=-3]="REFRESH_EXPIRED",e[e.OPTOUT=-4]="OPTOUT"}(t=e.IdentityStatus||(e.IdentityStatus={}))}(n||(n={})),window.__uid2=new n,n.setupGoogleTag(),t.UID2=n,t.window=window}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{"use strict";function e(e){const t={NODE_ENV:"production",PUBLIC_URL:"https://growmefrontendassetsstack-growheadlessbucket79e0b0-aqcqbhbrt0qb.s3.amazonaws.com",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PACKAGE_VERSION:"1.7.1",SC_ATTR:"data-styled-grow-me",REACT_APP_BACKEND_BASE_URL:"https://api.grow.me",REACT_APP_LOGIN_IFRAME_URL:"https://app.grow.me/iframe-login",REACT_APP_SCRIPT_SRC_ROOT:"https://scripts.grow.me",REACT_APP_SNOWPLOW_APP_ID:"growheadless",REACT_APP_SNOWPLOW_COLLECTOR_URL:"https://some.growplow.events/com.snowplowanalytics.snowplow/tp2",REACT_APP_SNOWPLOW_TRACKER_NAMESPACE:"grow-me-headless-prod",REACT_APP_USE_PERSISTED_QUERIES:"true"}[e];if(!t)throw new Error('Required environment variable "'.concat(e,'" not found'));return t}const t=e("REACT_APP_BACKEND_BASE_URL"),r=(e("REACT_APP_SCRIPT_SRC_ROOT"),e("REACT_APP_SNOWPLOW_COLLECTOR_URL")),o=e("REACT_APP_SNOWPLOW_APP_ID"),i=e("REACT_APP_SNOWPLOW_TRACKER_NAMESPACE"),a=e("REACT_APP_PACKAGE_VERSION"),s=e("REACT_APP_LOGIN_IFRAME_URL"),d="iglu:com.mediavine/render_event/jsonschema/1-0-0";const c=function(e){if("true"===localStorage.getItem("grow:debug")){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.log(e,...n)}},l="__uid_2";function u(e){try{const t=window.__uid2.getAdvertisingToken();t&&(c("Initialize UID2",{advertisingToken:t}),e({name:"uid2AdvertisingTokenChanged",value:{advertisingToken:t}}))}catch(t){console.error(t)}}function p(e,t){const n=window.__uid2;try{n.init({identity:JSON.parse(e),callback:()=>{t&&u(t)}})}catch(r){console.error(r)}}function g(){window.__uid2||n(956)}function f(e){const t=document.cookie.match("(^|;)\\s*".concat(e,"\\s*=\\s*([^;]+)"));return t?t.pop():""}function v(e){let{accessToken:t,refreshToken:n,expiresIn:r}=e;localStorage.setItem("grow-faves:accessToken",t),localStorage.setItem("grow-faves:refreshToken",n),localStorage.setItem("grow-faves:expirationTime",function(e){return new Date(Date.now()+1e3*Number(e)).toUTCString()}(r))}async function m(e){let{apiBaseUrl:t}=e;if(!localStorage.getItem("grow-faves:refreshToken"))throw new Error("No refresh token found");const n=await async function(e){const t=localStorage.getItem("grow-faves:refreshToken");if(!t)throw new Error("No refresh token found");const n=await fetch("".concat(e,"/token"),{method:"POST",body:new URLSearchParams({grant_type:"refresh_token",refresh_token:t})}),r=await n.json();if("refresh_token"in r){const e={accessToken:r.access_token,refreshToken:r.refresh_token,expiresIn:r.expires_in};return v(e),e}throw 401!==n.status&&400!==n.status||y(),new Error(r.error)}(t);return n}let w;const h=6e4;async function I(e){let{apiBaseUrl:t}=e;w&&clearTimeout(w);const n=localStorage.getItem("grow-faves:expirationTime"),r=localStorage.getItem("grow-faves:refreshToken");if(!n||!r)return;let o=Number(new Date(n))-Number(new Date)-h;if(o<0){o=1e3*(await m({apiBaseUrl:t})).expiresIn-h}w=window.setTimeout((async()=>{await m({apiBaseUrl:t}),I({apiBaseUrl:t})}),o)}function S(){localStorage.removeItem("grow-faves:liverampEnvelope"),localStorage.removeItem("grow-faves:id5Data"),localStorage.removeItem("grow-faves:publinkData"),localStorage.removeItem("_lr_pairId"),localStorage.removeItem("_lr_pairId_exp"),localStorage.removeItem("_lr_env"),localStorage.removeItem("_lr_env_exp"),function(){const e=window.__uid2;try{e.disconnect()}catch(t){console.error(t)}}()}function y(){S(),localStorage.removeItem("grow-faves:authSource"),localStorage.removeItem("grow-faves:refreshToken"),localStorage.removeItem("grow-faves:accessToken"),localStorage.removeItem("grow-faves:expirationTime")}function E(e){const t=localStorage.getItem("grow-faves:accessToken"),n=localStorage.getItem("grow-faves:refreshToken"),r=localStorage.getItem("grow-faves:expirationTime");return Boolean(t&&n&&r&&((null===e||void 0===e?void 0:e.ignoreExpiration)||new Date(r)>new Date))}const _=()=>Boolean(document.querySelector("[data-grow-me-print-page]"));function k(e){return void 0!==e&&null!==e}function T(){const e=localStorage.getItem("grow-faves:accessToken");if(!e)return null;const t=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return}}(e);return(null===t||void 0===t?void 0:t.readerId)||null}const A={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let R;const b=new Uint8Array(16);function O(){if(!R&&(R="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(b)}const U=[];for(let n=0;n<256;++n)U.push((n+256).toString(16).slice(1));function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return U[e[t+0]]+U[e[t+1]]+U[e[t+2]]+U[e[t+3]]+"-"+U[e[t+4]]+U[e[t+5]]+"-"+U[e[t+6]]+U[e[t+7]]+"-"+U[e[t+8]]+U[e[t+9]]+"-"+U[e[t+10]]+U[e[t+11]]+U[e[t+12]]+U[e[t+13]]+U[e[t+14]]+U[e[t+15]]}const C=function(e,t,n){if(A.randomUUID&&!t&&!e)return A.randomUUID();const r=(e=e||{}).random||(e.rng||O)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return D(r)},N="iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",P=(e,t)=>"".concat(e,"x").concat(t);const L=class{constructor(e){let{collectorUrl:t,appId:n,trackerNamespace:r,appVersion:o,isEnabled:i,snowplowSession:a}=e;this.appId=void 0,this.appVersion=void 0,this.collectorUrl=void 0,this.snowplowSession=void 0,this.isBeaconAvailable=void 0,this.outQueue=void 0,this.trackerNamespace=void 0,this.isEnabled=void 0,this.skippedEvents=void 0,this.onVisibilityChange=()=>{"hidden"===document.visibilityState&&(this.sendEvent({action:"page_visibility_hidden",category:"pageActions"}),this.sendQueue())},this.sendQueue=()=>{if(0===this.outQueue.length)return;const e=(new Date).getTime().toString();this.outQueue.forEach((t=>{t.stm=e}));const t={schema:N,data:this.outQueue},n=new Blob([JSON.stringify(t)],{type:"application/json"});let r=!1;try{r=navigator.sendBeacon(this.collectorUrl,n)}catch{this.isBeaconAvailable=!1}r||this.snowplowRequest(this.outQueue),this.outQueue=[]},this.initializeStoredUserInfo=()=>{if(!this.isEnabled)return;let e={domainUserId:C(),sessionId:C(),visitCount:1,lastEventTimestamp:Date.now()};this.snowplowSession&&(e=this.snowplowSession);try{localStorage.setItem("growMeSnowplowUserInfo",JSON.stringify(e))}catch(t){}return e},this.getSnowplowUserInfo=()=>{if(this.isEnabled)try{const e=localStorage.getItem("growMeSnowplowUserInfo");if(!e){return this.initializeStoredUserInfo()}return JSON.parse(e)}catch(e){return this.initializeStoredUserInfo()}},this.getAndUpdateSnowplowUserInfo=()=>{if(this.isEnabled)try{let e=this.getSnowplowUserInfo();if(!e)return;return e.sessionId&&Date.now()-e.lastEventTimestamp<18e5?(e=this.updateStoredUserInfo({lastEventTimestamp:Date.now()}),e):(e=this.updateStoredUserInfo({sessionId:C(),lastEventTimestamp:Date.now(),visitCount:e.visitCount+1}),e)}catch{return this.initializeStoredUserInfo()}},this.skippedEvents=[],this.appId=n,this.appVersion=o,this.collectorUrl=t,this.isBeaconAvailable=Boolean(window.navigator.sendBeacon),a&&(this.snowplowSession=a),this.outQueue=[],this.trackerNamespace=r,this.isEnabled=!1!==i,this.initialize()}enable(){this.isEnabled||(this.isEnabled=!0,this.initialize(),this.skippedEvents.length&&this.skippedEvents.forEach((e=>this.sendEvent(e))),this.skippedEvents=[])}disable(){this.isEnabled&&(this.isEnabled=!1,this.deInitialize())}initialize(){this.isEnabled&&this.isBeaconAvailable&&(document.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.sendQueue))}deInitialize(){document.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.sendQueue)}enqueueEvent(e){this.isBeaconAvailable?(this.outQueue.push(e),this.outQueue.length>=1&&this.sendQueue()):this.snowplowRequest([e])}sendEvent(e){if(!this.isEnabled)return void this.skippedEvents.push(e);const{action:t,appVersion:n,category:r,cx:o,eventType:i,ue_px:a,readerId:s,...d}=e,c=this.getAndUpdateSnowplowUserInfo();if(!c)return;const l=navigator.language,u=document.characterSet,p=P(window.screen.width,window.screen.height),g=P(window.innerWidth,window.innerHeight),f=P(document.body.scrollWidth,document.body.scrollHeight),v=String(window.screen.colorDepth),m=(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){console.error(e)}})(),w=JSON.stringify({appVersion:n||this.appVersion,...d}),h=navigator.cookieEnabled?"1":"0",{domainUserId:I,visitCount:S,sessionId:y}=c,E=this.getEventBody({action:t,appId:this.appId,browserLanguage:l,category:r,collectorUrl:this.collectorUrl,colorDepth:v,cookieEnabled:h,cx:o,documentCharset:u,documentSize:f,domainUserId:I,eventType:i,property:w,readerId:s,screenSize:p,sessionId:y,snowplowSchema:N,timezone:m,trackerNamespace:this.trackerNamespace,ue_px:a,visitCount:S,windowSize:g});this.enqueueEvent(E)}getSnowplowCommonFields(){const e=window.location.href,t=document.referrer;return{timestamp:String(Date.now()),platform:"web",referrer:t,trackerVersion:"0.1.0",pageUrl:e,useragent:navigator.userAgent}}getEventBody(e){let{action:t,appId:n,browserLanguage:r,category:o,colorDepth:i,cookieEnabled:a,cx:s,documentCharset:d,documentSize:c,domainUserId:l,eventType:u,property:p,readerId:g,screenSize:f,sessionId:v,timezone:m,trackerNamespace:w,ue_px:h,visitCount:I,windowSize:S}=e;const{timestamp:y,platform:E,referrer:_,trackerVersion:k,pageUrl:T,useragent:A}=this.getSnowplowCommonFields();return{...s?{cx:s,ue_px:h}:{se_ca:o,se_ac:t,se_pr:p},aid:n,cd:i,cookie:a,cs:d,dtm:y,ds:c,duid:l,e:u||"se",eid:C(),lang:r,p:E,refr:_,res:f,sid:v,tna:w,tv:k,tz:m,ua:A,uid:g||void 0,url:T,vid:String(I),vp:S}}getPagePingBody(e){let{appId:t,domainUserId:n,minXOffset:r,maxXOffset:o,minYOffset:i,maxYOffset:a,pageTitle:s,sessionId:d,trackerNamespace:c}=e;const{timestamp:l,platform:u,referrer:p,trackerVersion:g,pageUrl:f,useragent:v}=this.getSnowplowCommonFields();return{aid:t,dtm:l,duid:n,e:"pp",eid:C(),p:u,page:s,pp_mix:r,pp_max:o,pp_miy:i,pp_may:a,refr:p,sid:d,tv:g,tna:c,url:f,ua:v}}async snowplowRequest(e){if(this.isEnabled)try{return await fetch(this.collectorUrl,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({schema:N,data:e})})}catch(t){}}updateStoredUserInfo(e){if(this.isEnabled)try{const t=localStorage.getItem("growMeSnowplowUserInfo");if(!t)return this.initializeStoredUserInfo();const n={...JSON.parse(t),...e};return localStorage.setItem("growMeSnowplowUserInfo",JSON.stringify(n)),n}catch(t){return this.initializeStoredUserInfo()}}};const x={setItem:function(e,t){try{const n=String(t);localStorage.setItem(e,n)}catch(n){console.error(n)}},getItem:function(e){try{const t=localStorage.getItem(e);if(null===t)return null;switch(e){case"grow-faves:authSource":case"grow-faves:accessToken":case"grow-faves:id5Data":case"grow-faves:cookiesNotAllowed":case"grow-faves:anonymousId":case"grow-faves:unverifiedReaderId":case"grow-faves:ghu":return t;default:return null}}catch(t){return console.error(t),null}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){console.error(t)}}};function B(e,t){const n=window;n.ats=n.ats||{},n.ats.retrieveEnvelope=t=>{const n=JSON.stringify({envelope:e});return t&&t(n),n},c("Initialize liveramp",{envelope:e}),t&&t({name:"atsRetrieveEnvelopeSet"})}function z(e,t){const n=new Date;n.setDate(n.getDate()+30),n.setHours(n.getHours()-1),localStorage.setItem("grow-faves:liverampEnvelope",JSON.stringify({envelope:e,expiresAt:n.toISOString()})),B(e,t)}function M(e){try{const r=e.envelopes.find((e=>"envelopeLiveramp"===e.source));null!==r&&void 0!==r&&r.value&&(t=r.value,n=e.expiresAt,localStorage.setItem("_lr_env",btoa(JSON.stringify({envelope:[t]}))),localStorage.setItem("_lr_env_exp",n));const o=e.envelopes.find((e=>"pairIds"===e.source));null!==o&&void 0!==o&&o.value&&function(e,t){const n=btoa(JSON.stringify({envelope:JSON.parse(atob(e))}));localStorage.setItem("_lr_pairId",n),localStorage.setItem("_lr_pairId_exp",t)}(o.value,e.expiresAt)}catch(r){console.error(r)}var t,n}function j(e,t){c("Initialize ID5",{connectId:e}),t({name:"id5IdChanged",value:{connectId:e}})}function H(){const e=function(){try{const e=localStorage.getItem("grow-faves:id5Data");if(!e)return;return JSON.parse(e)}catch(e){localStorage.removeItem("grow-faves:id5Data")}}();return e&&e.connectId}function V(e,t){const n=new Date;n.setDate(n.getDate()+1),n.setHours(n.getHours()-1),localStorage.setItem("grow-faves:id5Data",JSON.stringify({connectId:e,expiresAt:n.toISOString()})),t&&j(e,t)}const F="publinkIdChanged",J="grow-faves:publinkData";function G(e,t){t({name:F,value:{publink:e}})}function $(){const e=function(){try{const e=localStorage.getItem(J);return e?JSON.parse(e):null}catch(e){localStorage.removeItem(J)}return null}();return e&&"string"===typeof e.refresh&&new Date<new Date(e.refresh)?e:null}function W(e,t){let{publink:n,refresh:r}=e;localStorage.setItem(J,JSON.stringify({publink:n,refresh:r})),n&&t&&G(n,t)}var q;const K=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce(((e,t,r)=>"".concat(e).concat(t).concat(r in n?n[r]:"")),"")}(q||(Q=["\n  query GetIdentityIntegrations(\n    $offering: Offerings\n    $gdpr: Boolean!\n    $gdprConsent: String\n    $unverifiedReaderId: ID\n    $skipLiveramp: Boolean!\n    $skipUid2: Boolean!\n    $skipId5: Boolean!\n    $skipPublink: Boolean!\n    $skipLiverampV2: Boolean!\n    $skipAmazonAps: Boolean!\n  ) {\n    liverampEnvelope(unverifiedReaderId: $unverifiedReaderId)\n      @skip(if: $skipLiveramp)\n    liverampEnvelopes(unverifiedReaderId: $unverifiedReaderId)\n      @skip(if: $skipLiverampV2) {\n      envelopes {\n        source\n        value\n        err\n      }\n      expiresAt\n    }\n    tradeDeskUid(unverifiedReaderId: $unverifiedReaderId) @skip(if: $skipUid2)\n    id5Data(\n      gdpr: $gdpr\n      gdprConsent: $gdprConsent\n      unverifiedReaderId: $unverifiedReaderId\n    ) @skip(if: $skipId5) {\n      connectId\n    }\n    publinkId(\n      unverifiedReaderId: $unverifiedReaderId\n      gdpr: $gdpr\n      gdprConsent: $gdprConsent\n    ) @skip(if: $skipPublink) {\n      publink\n      refresh\n    }\n    amazonApsEnvelope(\n      offering: $offering\n      gdpr: $gdpr\n      gdprConsent: $gdprConsent\n    ) @skip(if: $skipAmazonAps) {\n      aipToken\n      cookieExpiry\n    }\n  }\n"],X||(X=Q.slice(0)),q=Object.freeze(Object.defineProperties(Q,{raw:{value:Object.freeze(X)}}))));var Q,X;const Y={setItem:function(e,t){try{let n;n="grow-faves:anonymousBookmarks"===e?JSON.stringify(t):String(t),localStorage.setItem(e,n)}catch(n){console.error(n)}},getItem:function(e){try{const t=localStorage.getItem(e);if(null===t)return null;switch(e){case"grow-faves:authSource":case"grow-faves:accessToken":case"grow-faves:refreshToken":case"grow-faves:expirationTime":case"grow-faves:cookiesNotAllowed":case"grow-faves:anonymousId":case"grow-faves:unverifiedReaderId":case"grow-faves:amazonApsEnvelope":return t;case"grow-faves:anonymousBookmarks":return function(e){let t;try{t=JSON.parse(e)}catch(n){return[]}return Array.isArray(t)?t.map((e=>function(e){if(!e||"object"!==typeof e)return!1;const t=e;return"string"===typeof t.id&&"string"===typeof t.pageId&&"string"===typeof t.description&&"string"===typeof t.imgUrl&&"string"===typeof t.url}(e)?e:null)).filter(k):[]}(t);case"grow-faves:liverampEnvelope":return function(e){try{const t=JSON.parse(e);if(t&&"string"===typeof t.expiresAt&&new Date<new Date(t.expiresAt)&&"string"===typeof t.envelope)return t}catch(t){}return Y.removeItem("grow-faves:liverampEnvelope"),null}(t);default:return null}}catch(t){return console.error(t),null}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){console.error(t)}}};const Z=Y;function ee(e,t){t({name:"amazonApsEnvelopeChanged",value:{aipToken:e}})}function te(e,t){let{aipToken:n,cookieExpiry:r}=e;document.cookie="AMZN-Token=".concat(n,"; expires=").concat(new Date(r).toUTCString(),"; path=/;"),localStorage.setItem("grow-faves:amazonApsEnvelope",JSON.stringify({aipToken:n,cookieExpiry:r})),t&&ee(n,t)}async function ne(e){g();const{countryCode:t,unverifiedReaderId:n,isGrowHeadless:r,ghu:o}=e,i=Boolean(window.$adManagementConfig||window.$mediavine),a=E(),s="US"===t&&i&&(a||n||o),d=function(){try{const e=f(l);return Boolean(e)}catch(e){return console.error(e),!1}}(),c=Boolean(H()),v=function(){const e=localStorage.getItem("grow-faves:liverampEnvelope");if(e)try{const{envelope:t,expiresAt:n}=JSON.parse(e),r=new Date(n).getTime()<(new Date).getTime();if(t&&!r)return!0}catch(t){return!1}return!1}(),m=function(){const e=localStorage.getItem("_lr_pairId"),t=localStorage.getItem("_lr_env");if(!e&&!t)return!1;const n=localStorage.getItem("_lr_pairId_exp"),r=localStorage.getItem("_lr_env_exp");return!(n&&new Date>=new Date(n)||r&&new Date>=new Date(r))}(),w=function(){const e=$();return Boolean(e)}(),h=r||!a||function(){const e=localStorage.getItem("grow-faves:amazonApsEnvelope");if(e)try{const{aipToken:t,cookieExpiry:n}=JSON.parse(e),r=new Date(n).getTime()<(new Date).getTime();if(t&&!r)return!0}catch(t){return!1}return!1}();if(s&&(d&&function(e){try{const t=window.__uid2;if(!f(l))return;t.init({callback:()=>{e&&u(e)}})}catch(t){console.error(t)}}(e.triggerSdkEvent),v&&function(e){try{const t=localStorage.getItem("grow-faves:liverampEnvelope");if(t){const n=JSON.parse(t);new Date(n.expiresAt)>new Date&&n.envelope&&B(n.envelope,e)}}catch(t){}}(e.triggerSdkEvent),c&&function(e){const t=H();t&&e&&j(t,e)}(e.triggerSdkEvent),w&&function(e){const t=$();t&&t.publink&&e&&G(t.publink,e)}(e.triggerSdkEvent),h&&function(e){try{const t=localStorage.getItem("grow-faves:amazonApsEnvelope");if(t){const n=JSON.parse(t);new Date(n.cookieExpiry)>new Date&&n.aipToken&&e&&ee(n.aipToken,e)}}catch(t){}}(e.triggerSdkEvent)),s&&(!d||!c||!v||!w||!m||!h)){var I;const t=await async function(e){var t;let{apiUrl:n,offering:r,gdpr:o,gdprConsent:i,unverifiedReaderId:a,ghu:s,readerId:d,skipUid2:c,skipId5:l,skipLiveramp:u,skipLiverampV2:p,skipPublink:g,skipAmazonAps:f}=e;const v=Z.getItem("grow-faves:accessToken"),m=await fetch("".concat(n,"/graphql"),{method:"post",body:JSON.stringify({query:K,variables:{offering:r,gdpr:o,gdprConsent:i,unverifiedReaderId:null!==(t=null!==d&&void 0!==d?d:a)&&void 0!==t?t:s,skipUid2:c,skipId5:l,skipLiveramp:u,skipLiverampV2:p,skipPublink:g,skipAmazonAps:f},operationName:"GetIdentityIntegrations"}),headers:v?{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}:{"Content-Type":"application/json"}}),{data:w}=await m.json();return w}({...e,skipId5:c,skipLiveramp:v,skipLiverampV2:m,skipPublink:w,skipUid2:d,skipAmazonAps:h});var S,y,k,T,A,R,b,O;if(t.liverampEnvelope&&z(t.liverampEnvelope,e.triggerSdkEvent),t.liverampEnvelopes&&M(t.liverampEnvelopes),t.tradeDeskUid&&p(t.tradeDeskUid,e.triggerSdkEvent),null!==(I=t.id5Data)&&void 0!==I&&I.connectId)V(null===(S=t.id5Data)||void 0===S?void 0:S.connectId,e.triggerSdkEvent);if(t.publinkId&&W(t.publinkId,e.triggerSdkEvent),t.amazonApsEnvelope&&te(t.amazonApsEnvelope,e.triggerSdkEvent),window.opener&&_())window.opener.postMessage({type:"GROW_IDS_GENERATED",uid2:null!==(y=t.tradeDeskUid)&&void 0!==y?y:null,id5:null!==(k=null===(T=t.id5Data)||void 0===T?void 0:T.connectId)&&void 0!==k?k:null,publinkId:null!==(A=t.publinkId)&&void 0!==A?A:null,liverampEnvelope:null!==(R=t.liverampEnvelope)&&void 0!==R?R:null,liverampEnvelopes:null!==(b=t.liverampEnvelopes)&&void 0!==b?b:null,amazonApsEnvelope:null!==(O=t.amazonApsEnvelope)&&void 0!==O?O:null},"*")}}const re=["page_render","page_init"];function oe(e){let t,{actionName:n}=e;switch(n){case"page_render":t={schema:d,data:{renderCategory:"page_render"}};break;case"page_init":t={schema:d,data:{renderCategory:"page_init"}};break;default:t={schema:"",data:{}}}return t}const ie=async function(e){var n;const r=new URL("".concat(t,"/graphql")),o=await fetch(r.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        mutation FindOrCreateGhu($emailHash: String!) {\n          findOrCreateGhu(data: { emailHash: $emailHash }) {\n            ghu\n          }\n        }\n      ",variables:{emailHash:e},operationName:"FindOrCreateGhu"})}),i=await o.json();if(null!==i&&void 0!==i&&null!==(n=i.data)&&void 0!==n&&n.findOrCreateGhu)return i.data.findOrCreateGhu;throw new Error("Failed to fetch ghu id")},ae=/^\S+@\S+\.\S+$/;async function se(e,t){const n=await async function(e){return await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"])}(e),r=(new TextEncoder).encode(t);return function(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}(await window.crypto.subtle.sign("HMAC",n,r))}const de=e=>{let{sendTrackingEvent:n,isPrivacyState:r,isLoggedIn:o,url:i}=e;const a=null===i||void 0===i?void 0:i.hostname;return async e=>{if(r||o)return;const i=e.target;if(!a)return;const s=[...i.elements].reduce(((e,t)=>{const n=t;return n.value&&(e=>ae.test(e))(n.value)?n.value:e}),null);if(!s)return;const d=String(Date.now()),c="".concat(s,":").concat(d);let l,u=null;try{u=await fetch("".concat(t,"/arbitrary-readers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,creationSource:"arbitraryForm",domainSource:a,signature:await se(a,c),timestamp:d})}),l=200===u.status}catch(g){l=!1}if(!u)return;const{reader:p}=await u.json();!x.getItem("grow-faves:unverifiedReaderId")&&null!==p&&void 0!==p&&p.id&&x.setItem("grow-faves:unverifiedReaderId",p.id),!x.getItem("grow-faves:authSource")&&null!==p&&void 0!==p&&p.id&&x.setItem("grow-faves:authSource","arbitraryForm"),n({name:"arbitrary_form_submission",success:l,form:i.classList.toString()})}};let ce=null,le={},ue=null,pe=null,ge=null;const fe=[".inline-subscribe","#grow-me-root"].join(", "),ve=["redirectUri","growMeCode","growMeShortenerToken","growReferrer","growUnverifiedReaderId","growAuthSource","growGhu"];!async function(){var e,n,d,c;if(!document.currentScript)return;pe=document.currentScript.getAttribute("data-grow-headless-beta-name"),ue=document.currentScript.getAttribute("data-grow-headless-beta-version");const l=E(),u=document.currentScript.getAttribute("data-grow-mediavine-site-id");if(!u)return;const f=window.GrowHeadlessData;if(null===f||void 0===f||!f.privacyData)return;ce=f.privacyData;const m=E({ignoreExpiration:!0}),w=null===(e=ce.gdprApplies)||void 0===e||e,h=null!==(n=ce.countryCode)&&void 0!==n?n:"",S=!w||m;let k=null;try{k=new URL(decodeURIComponent(window.location.href))}catch($){}const A=new URLSearchParams(null===(d=k)||void 0===d?void 0:d.search),R=A.get("domainUserId"),b=A.get("sessionId"),O=Number(A.get("visitCount")),U=Number(A.get("lastEventTimestamp")),D=A.get("sh_kit");let C;R&&b&&O&&U&&(C={domainUserId:R,sessionId:b,visitCount:O,lastEventTimestamp:U}),ge=new L({collectorUrl:r,appId:o,trackerNamespace:i,appVersion:a,isEnabled:S,snowplowSession:C});let N=localStorage.getItem("grow-faves:ghu");!N&&D&&S&&(({ghu:N}=await ie(D)),N&&x.setItem("grow-faves:ghu",N));const P=T(),B=localStorage.getItem("grow-faves:unverifiedReaderId"),j=function(){var e;return null!==(e=localStorage.getItem("grow-faves:authSource"))&&void 0!==e?e:null}(),H=function(e){let{isLoggedIn:t,unverifiedReaderId:n,authSource:r,ghu:o}=e;return"smartLock"===r?"6":"automailer"===r?"4":"automailerImport"===r?"5":"espLink"===r?"7":"arbitraryForm"===r?"8":t?"1":n?"3":o?"9":"0"}({isLoggedIn:l,unverifiedReaderId:B,authSource:j,ghu:N}),F=e=>{var t;let{name:n,...r}=e;ge&&function(e){const t=e;return re.includes(t)}(n)&&ge.sendEvent({action:n,appVersion:ue,betaName:pe,category:"pageActions",cx:window.btoa(JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:[{schema:"iglu:com.mediavine/site/jsonschema/1-0-0",data:{siteId:u,appVersion:ue,betaName:pe}},{schema:"iglu:com.mediavine/user/jsonschema/1-0-0",data:{isLoggedIn:l,isGDPR:w,isUS:"US"===h,gid:Number(H),readerId:P,unverifiedReaderId:B}}]})),eventType:"ue",readerId:P,ue_px:window.btoa(JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:oe({actionName:n})}))}),null===(t=ge)||void 0===t||t.sendEvent({action:n,appVersion:ue,betaName:pe,category:"pageActions",isLoggedIn:l,readerId:P,siteId:u,gid:H,unverifiedReaderId:B||void 0,...r})};if(F({name:"page_render"}),le=function(e,t){const n=new URL(window.location.href),r=window.location.hash.replace("#","");if(!r)return{};const o=new URLSearchParams(r),i=ve.reduce(((e,t)=>{const n=o.get(t);return n?{...e,[t]:n}:e}),{});if(!Object.keys(i).length)return{};const{redirectUri:a,growMeCode:s,growUnverifiedReaderId:d,growAuthSource:c,growGhu:l,...u}=i;return d&&e&&!x.getItem("grow-faves:unverifiedReaderId")&&localStorage.setItem("grow-faves:unverifiedReaderId",d.toString()),l&&e&&!x.getItem("grow-faves:ghu")&&localStorage.setItem("grow-faves:ghu",l.toString()),c&&e&&!x.getItem("grow-faves:authSource")?x.setItem("grow-faves:authSource",c.toString()):c&&e&&x.getItem("grow-faves:authSource")&&t({name:"authsource_change_attempt",existingAuthSource:x.getItem("grow-faves:authSource"),newAuthSource:c.toString()}),window.history.replaceState(null,document.title,n.toString()),{...u,authCodeParams:s&&a?{redirectUri:a,growMeCode:s,growMeSignUp:!1}:null}}(S,F),le.growReferrer){const{ga:e,__gaTracker:t}=window,n=e||t;n&&n("set","referrer",window.location.origin)}if(le.growMeShortenerToken&&!m)try{await async function(e,t,n){const r=await fetch("".concat(e,"/tokens"),{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","content-type":"application/json"},body:JSON.stringify({siteId:n}),method:"POST"}),o=await r.json();if(!r.ok)throw new Error(o.error);return v({accessToken:o.access_token,refreshToken:o.refresh_token,expiresIn:o.expires_in}),o}(t,le.growMeShortenerToken,u)}catch($){0}else if(le.authCodeParams)try{await async function(e){let{apiUrl:t,redirectUri:n,siteId:r,growMeCode:o}=e;const i=await fetch("".concat(t,"/auth-code-tokens"),{headers:{Accept:"application/json","content-type":"application/json"},body:JSON.stringify({siteId:r,redirectUri:n,growMeCode:o}),method:"POST"}),a=await i.json();if(!i.ok)throw new Error(a.error);return v({accessToken:a.access_token,refreshToken:a.refresh_token,expiresIn:a.expires_in}),a}({...le.authCodeParams,apiUrl:t,siteId:u})}catch($){0}await I({apiBaseUrl:t});const J=async()=>{const e=()=>{var e;return ne({apiUrl:t,countryCode:null===(e=ce)||void 0===e?void 0:e.countryCode,gdpr:w,unverifiedReaderId:localStorage.getItem("grow-faves:unverifiedReaderId"),readerId:T(),isGrowHeadless:!0,ghu:localStorage.getItem("grow-faves:ghu")})};e(),function(e){let{apiBaseUrl:t,canStoreBrowserData:n,dispatch:r,sendTrackingEvent:o,initializeIndentityIntegrations:i,triggerSdkEvent:a}=e;g(),window.addEventListener("message",(function(e){var s,d;if("MV_AUTHENTICATED"===(null===(s=e.data)||void 0===s?void 0:s.type)&&"string"===typeof e.data.accessToken&&"string"===typeof e.data.refreshToken){o({name:(d=e.data,"sign_up"===d.authType?"sign_up_success":d.isAutoLogin?d.isIframe?"auto_login_iframe":"auto_login_window":"login_success"),isLoggedIn:!0,source:e.data.source});const n=Z.getItem("grow-faves:authSource");e.data.source&&n?o({name:"authsource_change_attempt",existingAuthSource:n,newAuthSource:e.data.source}):e.data.source&&!n&&Z.setItem("grow-faves:authSource",e.data.source),Z.setItem("grow-faves:accessToken",e.data.accessToken),Z.setItem("grow-faves:refreshToken",e.data.refreshToken),Z.setItem("grow-faves:expirationTime",e.data.expirationTime),e.data.dontInitializeIds||(I({apiBaseUrl:t}),i()),r({type:"LOGIN_SUCCESS",authType:e.data.authType,isAutoLogin:e.data.isAutoLogin}),window.opener&&_()&&window.opener.postMessage({...e.data,dontInitializeIds:!0},"*")}else"MV_LOGGED_OUT"===e.data.type?(r({type:"LOGOUT"}),y()):n&&"MV_ANONYMOUS_ID_FOUND"===e.data.type?(Z.setItem("grow-faves:anonymousId",e.data.anonymousId),r({type:"ANONYMOUS_ID",anonymousId:e.data.anonymousId})):"GROW_UNVERIFIED_READER_ID_FOUND"===e.data.type?(Z.setItem("grow-faves:unverifiedReaderId",e.data.unverifiedReaderId),o({name:"iframe_received_unverified_reader_id",hasUnverifiedReaderIdAlready:Boolean(Z.getItem("grow-faves:unverifiedReaderId"))}),i()):"GROW_SUBSCRIBE_SUCCESS"===e.data.type?(Z.setItem("grow-faves:unverifiedReaderId",e.data.unverifiedReaderId),i(),r({type:"SUBSCRIBE_SUCCESS",readerId:e.data.unverifiedReaderId,widgetId:e.data.widgetId})):"GROW_SUBSCRIBE_FAIL"===e.data.type?r({type:"SUBSCRIBE_FAILED",widgetId:e.data.widgetId}):n&&"MV_COOKIES_NOT_ALLOWED"===e.data.type?(Z.setItem("grow-faves:cookiesNotAllowed","true"),r({type:"COOKIES_NOT_ALLOWED"})):"MV_IFRAME_FLOW_COMPLETE"===e.data.type?r({type:"IFRAME_FLOW_COMPLETE"}):"GROW_IDS_GENERATED"===e.data.type&&(I({apiBaseUrl:t}),e.data.liverampEnvelope&&z(e.data.liverampEnvelope,a),e.data.liverampEnvelopes&&M(e.data.liverampEnvelopes),e.data.uid2&&p(e.data.uid2,a),e.data.id5&&V(e.data.id5,a),e.data.publinkId&&W(e.data.publinkId,a),e.data.amazonApsEnvelope&&te(e.data.amazonApsEnvelope,a))}))}({apiBaseUrl:t,canStoreBrowserData:S,dispatch:()=>{},sendTrackingEvent:F,initializeIndentityIntegrations:e}),!S||l||localStorage.getItem("grow-faves:cookiesNotAllowed")||function(e){let{siteId:t,iframeUrl:n,isHeadless:r}=e;const o=document.createElement("iframe");o.style.display="none",o.id="grow-login-iframe";const i=new URL(n);i.searchParams.set("siteId",t),i.searchParams.set("isHeadless",String(null!==r&&void 0!==r&&r)),i.searchParams.set("callback",window.location.href),o.src=i.toString(),document.body.appendChild(o)}({siteId:u,iframeUrl:s,isHeadless:!0})};w||await J();const G=de({sendTrackingEvent:F,isPrivacyState:w||(null===(c=ce)||void 0===c?void 0:c.isAdditionalPrivacyState),isLoggedIn:l,url:k});document.querySelectorAll(":not(".concat(fe,") form")).forEach((e=>{e.addEventListener("submit",G)}))}()})()})();